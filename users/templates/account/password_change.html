{% extends 'theme/base.html' %}
{% load allauth i18n %}

{% block content %}

<div class="container mx-auto px-4 py-8 max-w-2xl">

    <!-- Header -->
    <div class="flex items-center gap-4 mb-8">
        <a href="{% url 'users:settings' %}" class="btn btn-ghost btn-circle">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
            </svg>
        </a>
        <h1 class="text-4xl font-bold">{% trans "Change Password" %}</h1>
    </div>

    <!-- Change Password Form Card -->
    <div class="card bg-base-200 shadow-xl">
        <div class="card-body">
            <p class="text-base-content/70 mb-6">
                {% trans "Update your password to keep your account secure. You'll remain logged in after changing your password." %}
            </p>

            <form method="post" action="{% url 'account_change_password' %}">
                {% csrf_token %}

                <!-- Current Password -->
                <div class="form-control mb-4">
                    <label class="label" for="{{ form.oldpassword.id_for_label }}">
                        <span class="label-text font-medium">{% trans "Current Password" %}</span>
                    </label>
                    <input
                        type="password"
                        name="{{ form.oldpassword.name }}"
                        id="{{ form.oldpassword.id_for_label }}"
                        class="input input-bordered w-full"
                        placeholder="{% trans 'Enter your current password' %}"
                        required
                    >
                    {% if form.oldpassword.errors %}
                        <label class="label">
                            <span class="label-text-alt text-error">{{ form.oldpassword.errors.0 }}</span>
                        </label>
                    {% endif %}
                </div>

                <div class="divider"></div>

                <!-- New Password -->
                <div class="form-control mb-4">
                    <label class="label" for="{{ form.password1.id_for_label }}">
                        <span class="label-text font-medium">{% trans "New Password" %}</span>
                    </label>
                    <input
                        type="password"
                        name="{{ form.password1.name }}"
                        id="{{ form.password1.id_for_label }}"
                        class="input input-bordered w-full"
                        placeholder="{% trans 'Enter new password' %}"
                        required
                    >
                    {% if form.password1.errors %}
                        <label class="label">
                            <span class="label-text-alt text-error">{{ form.password1.errors.0 }}</span>
                        </label>
                    {% endif %}
                    <!-- Password Requirements -->
                    <label class="label">
                        <span class="label-text-alt">
                            {% trans "Password must be at least 8 characters and not entirely numeric" %}
                        </span>
                    </label>
                </div>

                <!-- Confirm New Password -->
                <div class="form-control mb-6">
                    <label class="label" for="{{ form.password2.id_for_label }}">
                        <span class="label-text font-medium">{% trans "Confirm New Password" %}</span>
                    </label>
                    <input
                        type="password"
                        name="{{ form.password2.name }}"
                        id="{{ form.password2.id_for_label }}"
                        class="input input-bordered w-full"
                        placeholder="{% trans 'Confirm new password' %}"
                        required
                    >
                    {% if form.password2.errors %}
                        <label class="label">
                            <span class="label-text-alt text-error">{{ form.password2.errors.0 }}</span>
                        </label>
                    {% endif %}
                </div>

                <!-- Action Buttons -->
                <div class="card-actions justify-end gap-3">
                    <a href="{% url 'users:settings' %}" class="btn btn-ghost">{% trans "Cancel" %}</a>
                    <button type="submit" class="btn btn-primary">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4">
                            <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
                            <path d="M2 17l10 5 10-5M2 12l10 5 10-5"></path>
                        </svg>
                        {% trans "Update Password" %}
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Security Tips -->
    <div class="alert bg-blue-50 border-blue-200 mt-6">
        <svg xmlns="http://www.w3.org/2000/svg" class="stroke-blue-600 shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <div>
            <h3 class="font-bold text-blue-900">{% trans "Security Tips" %}</h3>
            <div class="text-sm text-blue-800">
                <ul class="list-disc list-inside mt-2">
                    <li>{% trans "Use a unique password for this account" %}</li>
                    <li>{% trans "Avoid using personal information in your password" %}</li>
                    <li>{% trans "Consider using a password manager" %}</li>
                </ul>
            </div>
        </div>
    </div>

</div>

{% endblock %}
