<c-vars
    type="info"
    title=""
    message=""
    duration="5000"
/>

{% comment %}
Toast Notification Component

Usage:
    <c-toast type="success" title="Success!" message="Your changes have been saved." />
    <c-toast type="error" message="Something went wrong." />
    <c-toast type="warning" title="Warning" message="Please review your settings." />
    <c-toast type="info" message="This is an informational message." />

Props:
    - type: 'success', 'error', 'warning', 'info' (default: 'info')
    - title: Toast title (optional)
    - message: Toast message (required, can also use slot)
    - duration: Duration in milliseconds before auto-dismiss (default: 5000)
{% endcomment %}

{% with icon_class=type|default:"info" %}
<div
    class="toast-notification pointer-events-auto flex w-full max-w-md rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 overflow-hidden transition-all duration-300 ease-out transform translate-x-full opacity-0"
    x-data="{
        show: false,
        type: '{{ type|default:"info" }}',
        duration: 2000 
    }"
    x-init="
        setTimeout(() => { show = true }, 50);
        setTimeout(() => { show = false; setTimeout(() => $el.remove(), 300) }, duration);
    "
    :class="{
        'translate-x-0 opacity-100': show,
        'translate-x-full opacity-0': !show,
        'bg-blue-50 border-l-4 border-blue-500': type === 'info',
        'bg-green-50 border-l-4 border-green-500': type === 'success',
        'bg-yellow-50 border-l-4 border-yellow-500': type === 'warning',
        'bg-red-50 border-l-4 border-red-500': type === 'error'
    }"
    role="alert"
>
    <div class="flex-1 w-0 p-4">
        <div class="flex items-start">
            <!-- Icon -->
            <div class="flex-shrink-0">
                <!-- Success Icon -->
                <template x-if="type === 'success'">
                    <svg class="h-6 w-6 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </template>

                <!-- Error Icon -->
                <template x-if="type === 'error'">
                    <svg class="h-6 w-6 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </template>

                <!-- Warning Icon -->
                <template x-if="type === 'warning'">
                    <svg class="h-6 w-6 text-yellow-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                    </svg>
                </template>

                <!-- Info Icon -->
                <template x-if="type === 'info'">
                    <svg class="h-6 w-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </template>
            </div>

            <!-- Content -->
            <div class="ml-3 w-0 flex-1">
                {% if title %}
                <p class="text-sm font-semibold"
                   :class="{
                       'text-blue-900': type === 'info',
                       'text-green-900': type === 'success',
                       'text-yellow-900': type === 'warning',
                       'text-red-900': type === 'error'
                   }">
                    {{ title }}
                </p>
                {% endif %}
                <p class="{% if title %}mt-1 {% endif %}text-sm"
                   :class="{
                       'text-blue-700': type === 'info',
                       'text-green-700': type === 'success',
                       'text-yellow-700': type === 'warning',
                       'text-red-700': type === 'error'
                   }">
                    {% if message %}{{ message }}{% else %}{{ slot }}{% endif %}
                </p>
            </div>
        </div>
    </div>

    <!-- Close Button -->
    <div class="flex border-l"
         :class="{
             'border-blue-200': type === 'info',
             'border-green-200': type === 'success',
             'border-yellow-200': type === 'warning',
             'border-red-200': type === 'error'
         }">
        <button
            @click="show = false; setTimeout(() => $el.closest('.toast-notification').remove(), 300)"
            class="flex w-full items-center justify-center p-4 text-sm font-medium focus:outline-none focus:ring-2"
            :class="{
                'text-blue-700 hover:bg-blue-100 focus:ring-blue-500': type === 'info',
                'text-green-700 hover:bg-green-100 focus:ring-green-500': type === 'success',
                'text-yellow-700 hover:bg-yellow-100 focus:ring-yellow-500': type === 'warning',
                'text-red-700 hover:bg-red-100 focus:ring-red-500': type === 'error'
            }">
            <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
            </svg>
        </button>
    </div>
</div>
{% endwith %}
